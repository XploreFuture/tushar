<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>College Information</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #33ad99;
            margin: 0;
            padding: 20px;
        }
        form {
            background: #8d9247;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            max-width: 600px;
            margin: auto;
        }
        label {
            display: block;
            margin-bottom: 5px;
            color: #bbe6f0;
        }
        input[type="text"], input[type="number"], select {
            width: calc(100% - 24px);
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 20px;
        }
        button {
            background: #28a745;
            color: #fff;
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background: #218838;
        }
        h3 {
            color: #333;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        table, th, td {
            border: 1px solid #ccc;
        }
        th, td {
            padding: 10px;
            text-align: left;
        }
        th {
            background: #f8f8f8;
        }
        #generatedParagraph {
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            max-width: 800px;
            margin: 20px auto;
        }
    </style>
</head>
<body>
    <form>
        <label for="Collegename">College Name,City:</label>
        <input type="text" id="Collegename" name="Collegename" required><br><br>

        <label for="city">City:</label>
        <input type="text" id="city" name="city" required><br><br>

        <label for="state">State:</label>
        <select id="state" name="state"required>
            <option value="Select">Select</option>
            <option value="Andhra Pradesh">Andhra Pradesh</option>
            <option value="Arunachal Pradesh">Arunachal Pradesh</option>
            <option value="Assam">Assam</option>
            <option value="Bihar">Bihar</option>
            <option value="Chhattisgarh">Chhattisgarh</option>
            <option value="Goa">Goa</option>
            <option value="Gujarat">Gujarat</option>
            <option value="Haryana">Haryana</option>
            <option value="Himachal Pradesh">Himachal Pradesh</option>
            <option value="Jammu and Kashmir">Jammu and Kashmir</option>
            <option value="Jharkhand">Jharkhand</option>
            <option value="Karnataka">Karnataka</option>
            <option value="Kerala">Kerala</option>
            <option value="Madhya Pradesh">Madhya Pradesh</option>
            <option value="Maharashtra">Maharashtra</option>
            <option value="Manipur">Manipur</option>
            <option value="Meghalaya">Meghalaya</option>
            <option value="Mizoram">Mizoram</option>
            <option value="Nagaland">Nagaland</option>
            <option value="Odisha">Odisha</option>
            <option value="Punjab">Punjab</option>
            <option value="Rajasthan">Rajasthan</option>
            <option value="Sikkim">Sikkim</option>
            <option value="Tamil Nadu">Tamil Nadu</option>
            <option value="Telangana">Telangana</option>
            <option value="Tripura">Tripura</option>
            <option value="Uttar Pradesh">Uttar Pradesh</option>
            <option value="Uttarakhand">Uttarakhand</option>
            <option value="West Bengal">West Bengal</option>
            <option value="Andaman and Nicobar Islands">Andaman and Nicobar Islands</option>
            <option value="Chandigarh">Chandigarh</option>
            <option value="Dadra and Nagar Haveli and Daman and Diu">Dadra and Nagar Haveli and Daman and Diu</option>
            <option value="Lakshadweep">Lakshadweep</option>
            <option value="Delhi">Delhi</option>
            <option value="Puducherry">Puducherry</option>
        </select><br><br>

        <label for="established">Year Established:</label>
        <input type="number" id="established" name="established" required><br><br>

        <label for="Typeofcollege">Type of College:</label>
        <select id="Typeofcollege" name="Typeofcollege">
            <option value="Government College">Government</option>
            <option value="Private College">Private</option>
            <option value="Public College">Public</option>
        </select><br><br>

        <label for="appaff">Approval/Affiliation:</label>
        <select id="appaff" name="appaff">
            <option value="Approved">Approved</option>
            <option value="Affilated">Affilated</option>
        </select><br><br>

        <label for="appaffby">Approved/Affiliated by:</label>
        <input type="text" id="appaffby" name="appaffby" required><br><br>

        <label for="Courseoffered">Courses Offered:</label>
        <select id="Courseoffered" name="Courseoffered"multiple>
             <option value="Undergraduate">Undergraduate</option>
            <option value="Postgraduate">Postgraduate</option>
            <option value="Diploma">Diploma</option>
             <option value="Highersecondary">Higher secondary</option>
        </select><br><br>

        <label for="avcourse">avcourse</label>
        <input type="text" id="avcourse" name="avcourse" required>
        <select id="courseav" name="courseav" multiple>
         <option value="Agriculture">Agriculture</option>
         <option value="AIIMS">AIIMS</option>
         <option value="ANM">ANM</option>
         <option value="B.Arch">B.Arch</option>
         <option value="B.Com">B.Com</option>
         <option value="B.Des">B.Des</option>
         <option value="B.Ed">B.Ed</option>
         <option value="B.Pharm">B.Pharm</option>
         <option value="BA">BA</option>
         <option value="BA+BEd">BA+BEd</option>
         <option value="BBA">BBA</option>
         <option value="BCA">BCA</option>
         <option value="BDS">BDS</option>
         <option value="BE">BE</option>
         <option value="BFSc">BFSc</option>
         <option value="BHM">BHM</option>
         <option value="BSc">BSc</option>
         <option value="BSc (Nursing)">BSc (Nursing)</option>
         <option value="BSC IT">BSC IT</option>
         <option value="BSc Microbiology">BSc Microbiology</option>
         <option value="BSc+BEd">BSc+BEd</option>
         <option value="BTech">BTech</option>
         <option value="BTech - Government">BTech - Government</option>
         <option value="BTech - Private">BTech - Private</option>
         <option value="BVSC">BVSC</option>
         <option value="Diploma">Diploma</option>
         <option value="DM">DM</option>
         <option value="DMLT">DMLT</option>
         <option value="Engineering">Engineering</option>
         <option value="Engineering Government">Engineering Government</option>
         <option value="Engineering - Private">Engineering - Private</option>
         <option value="Government College">Government College</option>
         <option value="IIIT">IIIT</option>
         <option value="IIM">IIM</option>
         <option value="IISER">IISER</option>
         <option value="IIT">IIT</option>
         <option value="LLB">LLB</option>
         <option value="LLM">LLM</option>
         <option value="M.Arch">M.Arch</option>
         <option value="M.Com">M.Com</option>
         <option value="M.Des">M.Des</option>
         <option value="M.Ed">M.Ed</option>
         <option value="M.Phil">M.Phil</option>
         <option value="MA">MA</option>
         <option value="Management">Management</option>
         <option value="MBA College">MBA College</option>
         <option value="MBBS">MBBS</option>
         <option value="MCA College">MCA College</option>
         <option value="MD">MD</option>
         <option value="MDS">MDS</option>
         <option value="ME">ME</option>
         <option value="MFSc">MFSc</option>
         <option value="MS">MS</option>
         <option value="MSc">MSc</option>
         <option value="MSc (Nursing)">MSc (Nursing)</option>
         <option value="MSc Agriculture">MSc Agriculture</option>
         <option value="MSc Microbiology">MSc Microbiology</option>
         <option value="MTech College">MTech College</option>
         <option value="NIT">NIT</option>
         <option value="PG MBBS">PG MBBS</option>
         <option value="PGDM">PGDM</option>
         <option value="PhD">PhD</option>
         <option value="Private College">Private College</option>
</select>
<button onclick="getSelectedValues()">Get Categories</button><br><br>

        <label for="Entranceexam">Entrance Exam:</label>
        <input type="text" id="Entranceexam" name="Entranceexam" required><br><br>

        <label for="Highestpackage">Highest Package:</label>
        <input type="text" id="Highestpackage" name="Highestpackage" required><br><br>

        <label for="Averagepackage">Average Package:</label>
        <input type="text" id="Averagepackage" name="Averagepackage" required><br><br>

        <label for="Toprecruiter">Top Recruiter:</label>
        <input type="text" id="Toprecruiter" name="Toprecruiter" required><br><br>

        <label for ="extraheading1"> Extra Heading 1 : </label>
        <input type="text" id="extraheading1" name="extraheading1"> <br><br>

        <label for ="extrapara1"> Extra paragraph 1 : </label>
        <input type="text" id="extrapara1" name="extrapara1"> <br><br>

        <label for ="extraheading2"> Extra Heading 2 : </label>
        <input type="text" id="extraheading2" name="extraheading2"> <br><br>

        <label for ="extrapara2"> Extra paragraph 2 : </label>
        <input type="text" id="extrapara2" name="extrapara2"> <br><br>

        <label for ="extraheading3"> Extra Heading 3 : </label>
        <input type="text" id="extraheading3" name="extraheading3"> <br><br>

        <label for ="extrapara3"> Extra paragraph 3 : </label>
        <input type="text" id="extrapara3" name="extrapara3"> <br><br>

        <button type="button" onclick="generateParagraph()">Generate and Send</button>
    </form>

    <div id="generatedParagraph"></div>

    <h3>Courses</h3>
    <input type="text" id="courseName" placeholder="Course Name">
    <input type="number" id="courseFee" placeholder="Course Fee">
    <button type="button" onclick="addCourse()">Add Course</button>

    <table id="courseTable">
        <thead>
            <tr>
                <th>Course</th>
                <th>Fee</th>
            </tr>
        </thead>
        <tbody>
            <!-- Dynamic rows will be added here -->
        </tbody>
    </table>

    <script>

        async function getSelectedValues() {
            var select = document.getElementById('courseav');
            var selectedValues = [];
            for (var i = 0; i < select.options.length; i++) {
                if (select.options[i].selected) {
                    selectedValues.push(select.options[i].value);
                }
            }
            document.getElementById('avcourse').value = selectedValues.join(', ');
        }
        async function getOrCreateTag(tagName) {
            const url = 'https://xplorefuture.com/wp-json/wp/v2/tags';
            const username = 'Omm1'; // Replace with your WordPress username
            const password = 'pdb@L@knFco!%J^z^(LMbmJZ'; // Replace with your WordPress application password
            const credentials = btoa(`${username}:${password}`);

            try {
                // Try to get the tag
                const getResponse = await fetch(`${url}?search=${tagName}`, {
                    headers: {
                        'Authorization': `Basic ${credentials}`
                    }
                });
                const getTags = await getResponse.json();
                if (getTags.length > 0) {
                    return getTags[0].id;
                }

                // If the tag doesn't exist, create it
                const postResponse = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Basic ${credentials}`
                    },
                    body: JSON.stringify({ name: tagName })
                });
                const newTag = await postResponse.json();
                return newTag.id;
            } catch (error) {
                console.error('Error:', error);
            }
        }

         async function getOrCreateCategory(categoryName) {
            const url = 'https://xplorefuture.com/wp-json/wp/v2/categories';
            const username = 'Omm1'; // Replace with your WordPress username
            const password = 'pdb@L@knFco!%J^z^(LMbmJZ'; // Replace with your WordPress application password
            const credentials = btoa(`${username}:${password}`);

            try {
                // Try to get the category
                const getResponse = await fetch(`${url}?search=${categoryName}`, {
                    headers: {
                        'Authorization': `Basic ${credentials}`
                    }
                });
                const getCategories = await getResponse.json();
                if (getCategories.length > 0) {
                    return getCategories[0].id;
                }

                // If the category doesn't exist, create it
                const postResponse = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Basic ${credentials}`
                    },
                    body: JSON.stringify({ name: categoryName })
                });
                const newCategory = await postResponse.json();
                return newCategory.id;
            } catch (error) {
                console.error('Error:', error);
            }
        }
        async function sendPostToWordpress(title, content, excerpt, tags, categories) {
            const url = 'https://xplorefuture.com/wp-json/wp/v2/posts';
            const username = 'Omm1'; // Replace with your WordPress username
            const password = 'pdb@L@knFco!%J^z^(LMbmJZ'; // Replace with your WordPress application password
            const credentials = btoa(`${username}:${password}`);

    try {
        const response = await fetch(url, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Basic ${credentials}`
            },
            body: JSON.stringify({
                title: title,
                content: content,
                excerpt: excerpt, // Include the excerpt here
                status: 'publish',
                tags: tags,
                categories: categories
            })
        });

        if (!response.ok) {
            const errorResponse = await response.json();
            console.error('Error:', errorResponse);
        } else {
            const postResponse = await response.json();
            console.log('Success:', postResponse);
            alert("Post submitted Successfully.")
        }
    } catch (error) {
        console.error('Error:', error);
    }
}


        async function generateParagraph() {
            let Collegename = document.getElementById('Collegename').value;
            let city = document.getElementById('city').value ;
            let state = document.getElementById('state').value;
            let established = document.getElementById('established').value;
            let Typeofcollege = document.getElementById('Typeofcollege').value;
            let appaff = document.getElementById('appaff').value;
            let appaffby = document.getElementById('appaffby').value;
            let Courseoffered = document.getElementById('Courseoffered').value;
            let avcourse = document.getElementById('avcourse').value;
            let Entranceexam = document.getElementById('Entranceexam').value;
            let Highestpackage = document.getElementById('Highestpackage').value;
            let Averagepackage = document.getElementById('Averagepackage').value;
            let Toprecruiter = document.getElementById('Toprecruiter').value;
            let extraheading1= document.getElementById('extraheading1').value;
            let extrapara1 = document.getElementById('extrapara1').value;
            let extraheading2= document.getElementById('extraheading2').value;
            let extrapara2 = document.getElementById('extrapara2').value;
            let extraheading3= document.getElementById('extraheading3').value;
            let extrapara3 = document.getElementById('extrapara3').value;


            // Constructing the paragraph with headings
            let paragraph = `<h3>Info</h3><p>${Collegename},${state} established in year ${established}.It is a reputed institute and offers various ${Courseoffered} courses in full-time mode.${Collegename} is a ${Typeofcollege} ${appaff} by ${appaffby}.</p>`;
            paragraph += ` Some of the most popular courses offered at the institute are ${avcourse} etc. Admission to the college is done by ${Entranceexam}.</p>`;
            paragraph += `<table>
        <tr><th>Type of College</th><td>${Typeofcollege}</td></tr>
        <tr><th>Established</th><td>${established}</td></tr>
        <tr><th>Affiliated/Approved by</th><td>${appaffby}</td></tr>
        <tr><th>Entrance Exam</th><td>${Entranceexam}</td></tr>
    </table>`;
            paragraph += `<h3>Courses and Fees</h3><p>The Courses of the ${Courseoffered} Program offered by the institute are listed below.</p>`;
            paragraph += `<table><tr><th>Course</th><th>Fee</th></tr>`;

            let courseTable = document.getElementById('courseTable').getElementsByTagName('tbody')[0];
            for (let i = 0; i < courseTable.rows.length; i++) {
                let cells = courseTable.rows[i].cells;
                paragraph += `<tr><td>${cells[0].innerText}</td><td>${cells[1].innerText}</td></tr>`;
            }
            paragraph += `</table>`;
             // Conditional placement section
    if (Highestpackage && Averagepackage) {
        paragraph += `<h3>Placement</h3><p>The placement cell of ${Collegename} has made an impeccable impression on the industry by forging a right balance between academics and industry. The Highest Package offered by the Recruiter is ${Highestpackage}. The Average Package provided by the institute is ${Averagepackage}.</p>`;
        paragraph += `<table><tr><th>Highest Package</th><th>Average Package</th></tr>`;
        paragraph += `<tr><td>${Highestpackage}</td><td>${Averagepackage}</td></tr></table>`;
    }
    if (extraheading1 && extrapara1) {
        paragraph += `<h3>${extraheading1}</h3><p>${extrapara1} </p>`;
    }
    if (extraheading2 && extrapara2) {
        paragraph += `<h3>${extraheading2}</h3><p>${extrapara2} </p>`;
    }
    if (extraheading3 && extrapara3) {
        paragraph += `<h3>${extraheading3}</h3><p>${extrapara3} </p>`;
    }

    // Top recruiter section (included only if Toprecruiter is provided)
    if (Toprecruiter) {
        paragraph += `<h3>Top Recruiter</h3><p>Top recruiters include</p> <p><strong>${Toprecruiter}.</strong></p>`;
    }
            
            let excerpt = `${Collegename} is a ${Typeofcollege} of ${state} present in ${city}. It offers various ${Courseoffered} Courses`;
            // Display the generated paragraph
            // document.getElementById('generatedParagraph').innerHTML = paragraph;
            document.getElementById('generatedParagraph').innerHTML = paragraph;

const tags = await Promise.all([getOrCreateTag(city), getOrCreateTag(state)]);
const categories = await Promise.all(avcourse.split(',').map(course => getOrCreateCategory(course.trim())));

sendPostToWordpress(Collegename,paragraph,excerpt, tags, categories);

}
            // Reset form and course table
    document.querySelector('form').reset(); // Reset the form fields

// Clear the course table
document.getElementById('courseTable').getElementsByTagName('tbody')[0].innerHTML = '';


        function addCourse() {
            // Get input values
            var courseName = document.getElementById("courseName").value;
            var courseFee = parseFloat(document.getElementById("courseFee").value);

            // Validate input
            if (courseName.trim() === "" || isNaN(courseFee) || courseFee <= 0) {
                alert("Please enter valid course name and fee.");
                return;
            }

            // Create new row in the table
            var table = document.getElementById("courseTable").getElementsByTagName('tbody')[0];
            var newRow = table.insertRow(table.rows.length);
            var cell1 = newRow.insertCell(0);
            var cell2 = newRow.insertCell(1);

            // Add data to cells
            cell1.textContent = courseName;
            cell2.textContent = courseFee.toFixed(2); // Display fee with 2 decimal places

            // Clear input fields
            document.getElementById("courseName").value = "";
            document.getElementById("courseFee").value = "";
        }
    </script>
</body>
